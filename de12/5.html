<html lang="jp">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>やぎの第５回</title>
     <link rel="stylesheet" href="./css/5style.css">
</head>

<div class="bg_pattern stripe-background">
<style>
 .bg_pattern {
    margin: 0;
    padding: 0;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    
    z-index: -1;
  }
  .stripe-background{
    background-color: #fff;
    background-image: 
        repeating-linear-gradient(45deg, rgba(160, 160, 160, 0.1) 0,rgba(160, 160, 160, 0.1) 2px,transparent 2px,transparent 40px),
        repeating-linear-gradient(-45deg,rgba(160, 160, 160, 0.1) 0,rgba(160, 160, 160, 0.1) 2px,transparent 2px,transparent 40px);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #333;
  }
  </style>
</div>

<body>
    <div class="headar"><h1>　デザイン演習Ⅰ.Ⅱ　第５回</h1><br></div><br><br><br><br>

        <h1 style="text-align:center">プログラミング</h1>
    
    <div class="text-box1">
        <h2>《 うちなーぐちチャット 》</h2>
        前回の課題で沖縄ネタに味をしめたので、今回は「AIとうちなーぐちで会話できる」プログラミングを考えました。
    </div>

    <div class="text-box2">
        <h2>《 ソースコード 》</h2>
        <pre><code>
from openai import OpenAI

#使用しているAPI
client = OpenAI(api_key="")

#AIへのお願い
system_prompt = "標準語にうちなーぐち(沖縄方言)を交えて、若者らしいカジュアルな口調で応答してください。
　　　　 　　　　ユーザーが質問したり話しかけたりした内容に合わせて、質問で返したり共感したりして会話を続けてください。
　　　　 　　　　会話を終了するには、ユーザーが「終わり」という終了ワードを入力します。
　　　　 　　　　その場合は、別れの挨拶と日常で使えるうちなーぐちや沖縄に関する豆知識を教えて、会話を終えてください。
　　　　 　　　　もしユーザーが「うちなーぐちを強めにして」などの要望を出したら柔軟に調整してください。"

def main():
    messages = [{"role":"system", "content":system_prompt}]
    print("‐‐‐‐‐‐‐‐‐‐‐‐‐うちなーぐちチャット‐‐‐‐‐‐‐‐‐‐‐‐‐\n（ 終わり で終了 ）")
    while True:
        user = input("あなた：").strip()
        if not user:
            continue
        messages.append({"role":"user","content":user})

        if any(word in user for word in ["終わり"]):
            user += "(ユーザーが会話を終えたいと言っています。丁寧に終わりを伝えてください。)"
            res = client.chat.completions.create(
            model="gpt-4o-mini",
            messages=messages,
            temperature=0.8
        )
        res = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=messages,
        temperature=0.8
        )
        reply = res.choices[0].message.content.strip()
        print(f"AI: {reply}")
        messages.append({"role": "assistant", "content": reply})

        if any(word in user for word in ["終わり"]):
            break

if __name__ == "__main__":
    main()


#ここがAPIです----------------------------
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[{"role": "user", "content": system_prompt}]
)
#---------------------------------------
        </code></pre>
    </div>

    <div class="text-box1">
        <h2>《 完成品 》</h2>
        
    </div>

    <div class="text-box1">
        <h2>感想</h2>
        今回の課題である人の心を動かすという点においては満足のいくものを完成させることができた。<br>
        しかし、カッティング後に切り取るところの抜けを見つけたり、サイズを間違えていたりなど、すべきことを順序立ててまとめ、確認しながら進めたら起きないミスが多々あったため、それらには気を付けようと思った。
    </div><br><br><br>

</body>